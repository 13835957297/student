name: ğŸš€ æ‰“åŒ… Electron åº”ç”¨

# ä»€ä¹ˆæ—¶å€™è§¦å‘è¿™ä¸ªæµç¨‹
on:
  push:
    tags:
      - 'v*'  # å½“ä½ æ¨é€ä¸€ä¸ªä»¥ "v" å¼€å¤´çš„æ ‡ç­¾æ—¶ï¼Œæ¯”å¦‚ v1.0.0

jobs:
  build:
    name: æ„å»º ${{ matrix.os }} ç‰ˆæœ¬
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [windows-latest, macos-latest, ubuntu-latest]

    steps:
      # 1. ä¸‹è½½ä½ çš„ä»£ç 
      - name: ğŸ“¥ ä¸‹è½½ä»£ç 
        uses: actions/checkout@v4

      # 2. å®‰è£… Node.js
      - name: âš™ï¸ å®‰è£… Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'
          cache: 'npm'

      # 3. å®‰è£…ä¾èµ–
      - name: ğŸ”§ å®‰è£…ä¾èµ–
        run: npm ci

      # 4. æ‰“åŒ…åº”ç”¨
      - name: ğŸ“¦ æ‰“åŒ…åº”ç”¨
        run: npx electron-builder --publish never
        env:
          # è®¾ç½®åº”ç”¨å›¾æ ‡ï¼ˆå¦‚æœä½ æœ‰ï¼‰
          # WIN_CSC_LINK: ${{ secrets.WIN_CSC_LINK }}
          # WIN_CSC_KEY_PASSWORD: ${{ secrets.WIN_CSC_KEY_PASSWORD }}
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      # 5. ä¸Šä¼ æ‰“åŒ…å¥½çš„æ–‡ä»¶
      - name: ğŸ“¤ ä¸Šä¼ å®‰è£…åŒ…
        uses: actions/upload-artifact@v4
        with:
          name: dist-${{ matrix.os }} 
          path: dist/**